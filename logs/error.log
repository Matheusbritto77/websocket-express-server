{"level":"error","message":"Error creating user: Validation error: \"socketId\" is required","service":"websocket-server","stack":"Error: Validation error: \"socketId\" is required\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at Object.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:29:34)\n    at Promise.then.completed (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-06-22 13:03:04"}
{"level":"error","message":"Error creating room: Validation error: \"roomId\" is required","service":"websocket-server","stack":"Error: Validation error: \"roomId\" is required\n    at RoomRepository.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\RoomRepository.js:34:23)\n    at Object.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:36:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:03:04"}
{"level":"error","message":"Error finding user by socketId: Client must be connected before running operations","service":"websocket-server","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at executeOperationAsync (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:94:13)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:30\n    at maybeCallback (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\utils.ts:373:19)\n    at executeOperation (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:23)\n    at FindCursor._initialize (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:78:21)\n    at FindCursor.[kInit] (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:641:10)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at bound [kInit] (node:internal/util:428:12)\n    at next (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:716:50)\n    at FindCursor.next (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:385:12)\n    at Collection.findOne (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\collection.ts:497:30)\n    at UserRepository.findOne [as findUserBySocketId] (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:47:48)\n    at Object.findUserBySocketId (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:107:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:03:04"}
{"level":"error","message":"Error creating room: Client must be connected before running operations","service":"websocket-server","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at executeOperationAsync (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:94:13)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:30\n    at maybeCallback (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\utils.ts:373:19)\n    at executeOperation (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:23)\n    at Collection.insertOne (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\collection.ts:275:28)\n    at RoomRepository.insertOne [as createRoom] (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\RoomRepository.js:37:50)\n    at Object.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:134:30)\n    at Promise.then.completed (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-06-22 13:03:04"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"'; DROP TABLE users; --"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"'; DROP TABLE users; --\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"'; DROP TABLE users; --\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:04"}
{"level":"error","message":"Error creating user: Validation error: \"socketId\" is required","service":"websocket-server","stack":"Error: Validation error: \"socketId\" is required\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at Object.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:29:34)\n    at Promise.then.completed (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-06-22 13:09:19"}
{"level":"error","message":"Error creating room: Validation error: \"roomId\" is required","service":"websocket-server","stack":"Error: Validation error: \"roomId\" is required\n    at RoomRepository.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\RoomRepository.js:34:23)\n    at Object.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:36:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"socket-123!@#$%^&*()"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"socket-123!@#$%^&*()\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"socket-123!@#$%^&*()\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-0"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-0\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-0\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-3"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-3\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-3\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"level":"error","message":"Error creating user: Cannot use a session that has ended","service":"websocket-server","stack":"MongoExpiredSessionError: Cannot use a session that has ended\n    at applySession (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\sessions.ts:953:12)\n    at Connection.command (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection.ts:515:31)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\sdam\\server.ts:371:14\n    at Object.callback (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection_pool.ts:566:7)\n    at ConnectionPool.processWaitQueue (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection_pool.ts:862:25)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection_pool.ts:414:33\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-06-22 13:09:19"}
{"level":"error","message":"Error finding user by socketId: Client must be connected before running operations","service":"websocket-server","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at executeOperationAsync (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:94:13)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:30\n    at maybeCallback (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\utils.ts:373:19)\n    at executeOperation (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:23)\n    at FindCursor._initialize (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\find_cursor.ts:78:21)\n    at FindCursor.[kInit] (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:641:10)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at bound [kInit] (node:internal/util:428:12)\n    at next (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:716:50)\n    at FindCursor.next (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cursor\\abstract_cursor.ts:385:12)\n    at Collection.findOne (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\collection.ts:497:30)\n    at UserRepository.findOne [as findUserBySocketId] (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:47:48)\n    at Object.findUserBySocketId (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:107:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"address":"168.231.95.211:27017","level":"error","message":"Error creating user: Attempted to check out a connection from closed connection pool","service":"websocket-server","stack":"MongoPoolClosedError: Attempted to check out a connection from closed connection pool\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection_pool.ts:734:32\n    at performInitialHandshake.then.connection.destroy.force (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connect.ts:72:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"address":"168.231.95.211:27017","level":"error","message":"Error creating user: Attempted to check out a connection from closed connection pool","service":"websocket-server","stack":"MongoPoolClosedError: Attempted to check out a connection from closed connection pool\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connection_pool.ts:734:32\n    at performInitialHandshake.then.connection.destroy.force (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\cmap\\connect.ts:72:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:09:19"}
{"level":"error","message":"Error creating room: Client must be connected before running operations","service":"websocket-server","stack":"MongoNotConnectedError: Client must be connected before running operations\n    at executeOperationAsync (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:94:13)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:30\n    at maybeCallback (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\utils.ts:373:19)\n    at executeOperation (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\execute_operation.ts:79:23)\n    at Collection.insertOne (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\collection.ts:275:28)\n    at RoomRepository.insertOne [as createRoom] (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\RoomRepository.js:37:50)\n    at Object.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:134:30)\n    at Promise.then.completed (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-06-22 13:09:20"}
{"level":"error","message":"Redis Client Error: Connection timeout","service":"websocket-server","stack":"Error: Connection timeout\n    at Socket.<anonymous> (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\@redis\\client\\dist\\lib\\client\\socket.js:177:124)\n    at Object.onceWrapper (node:events:632:28)\n    at Socket.emit (node:events:518:28)\n    at Socket._onTimeout (node:net:589:8)\n    at listOnTimeout (node:internal/timers:573:17)\n    at processTimers (node:internal/timers:514:7)","timestamp":"2025-06-22 13:31:36"}
{"level":"error","message":"Error creating user: Validation error: \"socketId\" is required","service":"websocket-server","stack":"Error: Validation error: \"socketId\" is required\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at Object.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:222:34)\n    at Promise.then.completed (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-06-22 13:33:07"}
{"level":"error","message":"Error creating room: Validation error: \"roomId\" is required","service":"websocket-server","stack":"Error: Validation error: \"roomId\" is required\n    at RoomRepository.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\RoomRepository.js:34:23)\n    at Object.createRoom (C:\\laragon\\www\\talk\\websocket-express-server\\src\\tests\\edge-cases\\EdgeCases.test.js:229:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"socket-123!@#$%^&*()"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"socket-123!@#$%^&*()\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"socket-123!@#$%^&*()\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-0"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-0\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-0\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-3"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-3\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-3\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-4"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-4\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-4\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-2"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-2\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-2\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"code":11000,"index":0,"keyPattern":{"socketId":1},"keyValue":{"socketId":"concurrent-test-1"},"level":"error","message":"Error creating user: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-1\" }","service":"websocket-server","stack":"MongoServerError: E11000 duplicate key error collection: websocket_chat.users index: socketId_1 dup key: { socketId: \"concurrent-test-1\" }\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-22 13:33:07"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:58"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:58"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:59"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:59"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:59"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:41:59"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:42:00"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:42:00"}
{"level":"error","message":"Erro ao adicionar usuário à fila: this.redis.hset is not a function","service":"websocket-server","timestamp":"2025-06-22 13:42:00"}
{"level":"error","message":"Error creating user: Validation error: \"roomId\" must be a string","service":"websocket-server","stack":"Error: Validation error: \"roomId\" must be a string\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at SocketService.handleConnection (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:49:35)\n    at Namespace.<anonymous> (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:43:18)\n    at Namespace.emit (node:events:518:28)\n    at Namespace.emitReserved (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\typed-events.js:56:22)\n    at Namespace._doConnect (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:276:14)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:238:22\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-06-22 13:51:55"}
{"level":"error","message":"Error creating user: Validation error: \"roomId\" must be a string","service":"websocket-server","stack":"Error: Validation error: \"roomId\" must be a string\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at SocketService.handleConnection (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:49:35)\n    at Namespace.<anonymous> (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:43:18)\n    at Namespace.emit (node:events:518:28)\n    at Namespace.emitReserved (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\typed-events.js:56:22)\n    at Namespace._doConnect (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:276:14)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:238:22\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-06-22 13:57:30"}
{"level":"error","message":"Error creating user: Validation error: \"roomId\" is not allowed to be empty","service":"websocket-server","stack":"Error: Validation error: \"roomId\" is not allowed to be empty\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at SocketService.handleConnection (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:49:35)\n    at Namespace.<anonymous> (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:43:18)\n    at Namespace.emit (node:events:518:28)\n    at Namespace.emitReserved (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\typed-events.js:56:22)\n    at Namespace._doConnect (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:276:14)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:238:22\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-06-22 13:58:45"}
{"level":"error","message":"Error creating user: Validation error: \"roomId\" is required","service":"websocket-server","stack":"Error: Validation error: \"roomId\" is required\n    at UserRepository.createUser (C:\\laragon\\www\\talk\\websocket-express-server\\src\\repositories\\UserRepository.js:33:23)\n    at SocketService.handleConnection (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:49:35)\n    at Namespace.<anonymous> (C:\\laragon\\www\\talk\\websocket-express-server\\src\\SocketService.js:43:18)\n    at Namespace.emit (node:events:518:28)\n    at Namespace.emitReserved (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\typed-events.js:56:22)\n    at Namespace._doConnect (C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:276:14)\n    at C:\\laragon\\www\\talk\\websocket-express-server\\node_modules\\socket.io\\dist\\namespace.js:238:22\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-06-22 13:59:46"}
